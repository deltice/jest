<html><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1"/><title>The Jest Object · Jest</title><meta name="viewport" content="width=device-width"/><meta property="og:title" content="The Jest Object · Jest"/><meta property="og:type" content="website"/><meta property="og:url" content="https://facebook.github.io/jest/index.html"/><meta property="og:description" content="Объект `jest` автоматически помещается в область видимости каждого тестового файла. Методы объекта `jest` позволяют создавать mock-объекты и управлять поведением Jest."/><link rel="shortcut icon" href="/jest/img/favicon/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="/jest/css/main.css"/><script async="" defer="" src="https://buttons.github.io/buttons.js"></script></head><body class="sideNavVisible"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/jest/"><img src="/jest/img/jest-outline.svg"/><h2>Jest</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li><a href="/jest/docs/ru/getting-started.html" target="_self">Документация</a></li><li><a href="/jest/docs/ru/api.html" target="_self">API</a></li><li><a href="/jest/ru/help.html" target="_self">Справка</a></li><li><a href="/jest/blog" target="_self">Блог</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/jest/img/language.svg"/>Русский</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/jest/ja">日本語</a></li><li><a href="/jest/en">English</a></li><li><a href="/jest/es-ES">Español</a></li><li><a href="/jest/pt-BR">Português (Brasil)</a></li><li><a href="/jest/uk">Українська</a></li><li><a href="/jest/zh-Hans">简体中文</a></li><li><a href="https://crowdin.com/project/jest" target="_blank">Help Translate</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(){
          if(languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search"/></li><li><a href="https://github.com/facebook/jest" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>API Reference</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Introduction</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ru/getting-started.html#content">Getting Started</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/using-matchers.html#content">Using Matchers</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/asynchronous.html#content">Testing Asynchronous Code</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/setup-teardown.html#content">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/mock-functions.html#content">Mock Functions</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/more-resources.html#content">More Resources</a></li></ul></div><div class="navGroup navGroupActive"><h3>API Reference</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ru/api.html#content">Globals</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/expect.html#content">Expect</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/mock-function-api.html#content">Mock Functions</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/jest/docs/ru/jest-object.html#content">The Jest Object</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/configuration.html#content">Configuring Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/cli.html#content">Jest CLI Options</a></li></ul></div><div class="navGroup navGroupActive"><h3>Guides</h3><ul><li class="navListItem"><a class="navItem" href="/jest/docs/ru/snapshot-testing.html#content">Тестирование при помощи снимков</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/tutorial-react.html#content">Testing React Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/tutorial-react-native.html#content">Testing React Native Apps</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/tutorial-async.html#content">An Async Example</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/timer-mocks.html#content">Timer Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/manual-mocks.html#content">Manual Mocks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/webpack.html#content">Using with webpack</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/migration-guide.html#content">Migrating to Jest</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/testing-frameworks.html#content">Testing other frameworks</a></li><li class="navListItem"><a class="navItem" href="/jest/docs/ru/troubleshooting.html#content">Troubleshooting</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://crowdin.com/project/jest/ru" target="_blank">Translate this Doc</a><h1>The Jest Object</h1></header><article><div><p>Объект <code>jest</code> автоматически помещается в область видимости каждого тестового файла. Методы объекта <code>jest</code> позволяют создавать mock-объекты и управлять поведением Jest.</p><h2><a class="anchor" name=""></a>Методы <a class="hash-link" href="#">#</a></h2><ul><li><a href="#jestclearalltimers" target=""><code>jest.clearAllTimers()</code></a></li><li><a href="#jestdisableautomock" target=""><code>jest.disableAutomock()</code></a></li><li><a href="#jestenableautomock" target=""><code>jest.enableAutomock()</code></a></li><li><a href="#jestfnimplementation" target=""><code>jest.fn(implementation)</code></a></li><li><a href="#jestismockfunctionfn" target=""><code>jest.isMockFunction(fn)</code></a></li><li><a href="#jestgenmockfrommodulemodulename" target=""><code>jest.genMockFromModule(moduleName)</code></a></li><li><a href="#jestmockmodulename-factory-options" target=""><code>jest.mock(moduleName, factory, options)</code></a></li><li><a href="#jestunmockmodulename" target=""><code>jest.unmock(moduleName)</code></a></li><li><a href="#jestdomockmodulename-factory-options" target=""><code>jest.doMock(moduleName, factory, options)</code></a></li><li><a href="#jestdontmockmodulename" target=""><code>jest.dontMock(moduleName)</code></a></li><li><a href="#jestclearallmocks" target=""><code>jest.clearAllMocks()</code></a></li><li><a href="#jestresetallmocks" target=""><code>jest.resetAllMocks()</code></a></li><li><a href="#jestrestoreallmocks" target=""><code>jest.restoreAllMocks()</code></a></li><li><a href="#jestresetmodules" target=""><code>jest.resetModules()</code></a></li><li><a href="#jestrunallticks" target=""><code>jest.runAllTicks()</code></a></li><li><a href="#jestrunalltimers" target=""><code>jest.runAllTimers()</code></a></li><li><a href="#jestruntimerstotimemstorun" target=""><code>jest.runTimersToTime(msToRun)</code></a></li><li><a href="#jestrunonlypendingtimers" target=""><code>jest.runOnlyPendingTimers()</code></a></li><li><a href="#jestsetmockmodulename-moduleexports" target=""><code>jest.setMock(moduleName, moduleExports)</code></a></li><li><a href="#jestsettimeouttimeout" target=""><code>jest.setTimeout(timeout)</code></a></li><li><a href="#jestusefaketimers" target=""><code>jest.useFakeTimers()</code></a></li><li><a href="#jestuserealtimers" target=""><code>jest.useRealTimers()</code></a></li><li><a href="#jestspyonobject-methodname" target=""><code>jest.spyOn(object, methodName)</code></a></li></ul><hr/><h2><a class="anchor" name=""></a>Справка <a class="hash-link" href="#">#</a></h2><h3><a class="anchor" name="jestclearalltimers"></a><code>jest.clearAllTimers()</code> <a class="hash-link" href="#jestclearalltimers">#</a></h3><p>Удаляет все таймеры из системы таймеров.</p><p>Это означает, что если были запланированы некие таймеры, которые ещё не выполнились, то они будут удалены и в будущем выполниться не смогут.</p><h3><a class="anchor" name="jestdisableautomock"></a><code>jest.disableAutomock()</code> <a class="hash-link" href="#jestdisableautomock">#</a></h3><p>Отключает автоматическое создание mock-объектов в загрузчике модулей.</p><p>После вызова этого метода все обращения к <code>require()</code> будут возвращать реальные версии каждого модуля (а не их mock-версии).</p><p>Это обычно полезно, когда у вас есть сценарий, где количество зависимостей, которые вы хотите сымитировать, гораздо меньше, чем количество зависимостей, для которых это не требуется. Например, если вы пишете тест для модуля, который использует большое число зависимостей, которые могут быть расценены, как «детали реализации» модуля, то вы, вероятно, не захотите их имитировать.</p><p>Примеры зависимостей, которые могут считаться «деталями реализации», лежат в диапазоне, начиная от встроенных в язык функций (например, метод Array.prototype) и заканчивая более общими служебными методами (underscore/lo-dash, работа с массивами и т.д.) и даже целыми библиотеками, такими как React.js.</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><p><em>Примечание: этот метод ранее назывался <code>autoMockOff</code>. При использовании <code>babel-jest</code> вызовы <code>disableAutomock</code> будут автоматически перенесены наверх в текущем блоке кода. Если вы хотите явно избежать этого поведения, используйте <code>autoMockOff</code>.</em></p><h3><a class="anchor" name="jestenableautomock"></a><code>jest.enableAutomock()</code> <a class="hash-link" href="#jestenableautomock">#</a></h3><p>Enables automatic mocking in the module loader.</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><p><em>Note: this method was previously called <code>autoMockOn</code>. When using <code>babel-jest</code>, calls to <code>enableAutomock</code> will automatically be hoisted to the top of the code block. Use <code>autoMockOn</code> if you want to explicitly avoid this behavior.</em></p><h3><a class="anchor" name="jestfnimplementation"></a><code>jest.fn(implementation)</code> <a class="hash-link" href="#jestfnimplementation">#</a></h3><p>Returns a new, unused <a href="/jest/docs/mock-function-api.html" target="">mock function</a>. Optionally takes a mock implementation.</p><pre class="prism language-js">  <span class="token keyword">const</span> mockFn <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">mockFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>mockFn<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span spellcheck="true" class="token comment">// With a mock implementation:</span>
  <span class="token keyword">const</span> returnsTrue <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">returnsTrue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// true;</span></pre><h3><a class="anchor" name="jestismockfunctionfn"></a><code>jest.isMockFunction(fn)</code> <a class="hash-link" href="#jestismockfunctionfn">#</a></h3><p>Determines if the given function is a mocked function.</p><h3><a class="anchor" name="jestgenmockfrommodulemodulename"></a><code>jest.genMockFromModule(moduleName)</code> <a class="hash-link" href="#jestgenmockfrommodulemodulename">#</a></h3><p>Given the name of a module, use the automatic mocking system to generate a mocked version of the module for you.</p><p>This is useful when you want to create a <a href="/jest/docs/manual-mocks.html" target="">manual mock</a> that extends the automatic mock&#x27;s behavior.</p><h3><a class="anchor" name="jestmockmodulename-factory-options"></a><code>jest.mock(moduleName, factory, options)</code> <a class="hash-link" href="#jestmockmodulename-factory-options">#</a></h3><p>Mocks a module with an auto-mocked version when it is being required. <code>factory</code> and <code>options</code> are optional. For example:</p><pre class="prism language-js"><span spellcheck="true" class="token comment">// banana.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token string">&#x27;banana&#x27;</span><span class="token punctuation">;</span>

<span spellcheck="true" class="token comment">// __tests__/test.js</span>
jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;../banana&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> banana <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../banana&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// banana will be explicitly mocked.</span>

<span class="token function">banana</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// will return &#x27;undefined&#x27; because the function is auto-mocked.</span></pre><p>The second argument can be used to specify an explicit module factory that is being run instead of using Jest&#x27;s automocking feature:</p><pre class="prism language-js">jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> moduleName <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// This runs the function specified as second argument to `jest.mock`.</span>
<span class="token function">moduleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// Will return &#x27;42&#x27;;</span></pre><p>The third argument can be used to create virtual mocks – mocks of modules that don&#x27;t exist anywhere in the system:</p><pre class="prism language-js">jest<span class="token punctuation">.</span><span class="token function">mock</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span spellcheck="true" class="token comment">/*
   * Custom implementation of a module that doesn&#x27;t exist in JS,
   * like a generated module or a native module in react-native.
   */</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>virtual<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p><em>Warning: Importing a module in a setup file (as specified by <code>setupTestFrameworkScriptFile</code>) will prevent mocking for the module in question, as well as all the modules that it imports.</em></p><p>Modules that are mocked with <code>jest.mock</code> are mocked only for the file that calls <code>jest.mock</code>. Another file that imports the module will get the original implementation even if run after the test file that mocks the module.</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><h3><a class="anchor" name="jestunmockmodulename"></a><code>jest.unmock(moduleName)</code> <a class="hash-link" href="#jestunmockmodulename">#</a></h3><p>Indicates that the module system should never return a mocked version of the specified module from <code>require()</code> (e.g. that it should always return the real module).</p><p>The most common use of this API is for specifying the module a given test intends to be testing (and thus doesn&#x27;t want automatically mocked).</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><h3><a class="anchor" name="jestdomockmodulename-factory-options"></a><code>jest.doMock(moduleName, factory, options)</code> <a class="hash-link" href="#jestdomockmodulename-factory-options">#</a></h3><p>When using <code>babel-jest</code>, calls to <code>mock</code> will automatically be hoisted to the top of the code block. Use this method if you want to explicitly avoid this behavior.</p><p>One example when this is useful is when you want to mock a module differently within the same file:</p><pre class="prism language-js"><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  jest<span class="token punctuation">.</span><span class="token function">resetModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;moduleName 1&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  jest<span class="token punctuation">.</span><span class="token function">doMock</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> moduleName <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">moduleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;moduleName 2&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  jest<span class="token punctuation">.</span><span class="token function">doMock</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> jest<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> moduleName <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../moduleName&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">moduleName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><h3><a class="anchor" name="jestdontmockmodulename"></a><code>jest.dontMock(moduleName)</code> <a class="hash-link" href="#jestdontmockmodulename">#</a></h3><p>When using <code>babel-jest</code>, calls to <code>unmock</code> will automatically be hoisted to the top of the code block. Use this method if you want to explicitly avoid this behavior.</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><h3><a class="anchor" name="jestclearallmocks"></a><code>jest.clearAllMocks()</code> <a class="hash-link" href="#jestclearallmocks">#</a></h3><p>Clears the <code>mock.calls</code> and <code>mock.instances</code> properties of all mocks. Equivalent to calling <code>.mockClear()</code> on every mocked function.</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><h3><a class="anchor" name="jestresetallmocks"></a><code>jest.resetAllMocks()</code> <a class="hash-link" href="#jestresetallmocks">#</a></h3><p>Resets the state of all mocks. Equivalent to calling <code>.mockReset()</code> on every mocked function.</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><h3><a class="anchor" name="jestrestoreallmocks"></a><code>jest.restoreAllMocks()</code> <a class="hash-link" href="#jestrestoreallmocks">#</a></h3><h5><a class="anchor" name="available-in-jest-2010"></a>available in Jest <strong>20.1.0+</strong> <a class="hash-link" href="#available-in-jest-2010">#</a></h5><p>Restores all mocks back to their original value. Equivalent to calling <code>.mockRestore</code> on every mocked function. Beware that <code>jest.restoreAllMocks()</code> only works when mock was created with <code>jest.spyOn</code>; other mocks will require you to manually restore them.</p><h3><a class="anchor" name="jestresetmodules"></a><code>jest.resetModules()</code> <a class="hash-link" href="#jestresetmodules">#</a></h3><p>Resets the module registry - the cache of all required modules. This is useful to isolate modules where local state might conflict between tests.</p><p>Пример:</p><pre class="prism language-js"><span class="token keyword">const</span> sum1 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../sum&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
jest<span class="token punctuation">.</span><span class="token function">resetModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> sum2 <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../sum&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
sum1 <span class="token operator">===</span> sum2<span class="token punctuation">;</span>
<span spellcheck="true" class="token comment">// &gt; false (Оба модуля sum являются отдельными &quot;экземплярами&quot; модуля sum.)</span></pre><p>Пример в тесте:</p><pre class="prism language-js"><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  jest<span class="token punctuation">.</span><span class="token function">resetModules</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;работает&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../sum&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;также работает&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sum <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;../sum&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span spellcheck="true" class="token comment">// sum это отличная от предыдущего теста копия модуля sum.</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><h3><a class="anchor" name="jestrunallticks"></a><code>jest.runAllTicks()</code> <a class="hash-link" href="#jestrunallticks">#</a></h3><p>Exhausts the <strong>micro</strong>-task queue (usually interfaced in node via <code>process.nextTick</code>).</p><p>When this API is called, all pending micro-tasks that have been queued via <code>process.nextTick</code> will be executed. Additionally, if those micro-tasks themselves schedule new micro-tasks, those will be continually exhausted until there are no more micro-tasks remaining in the queue.</p><h3><a class="anchor" name="jestrunalltimers"></a><code>jest.runAllTimers()</code> <a class="hash-link" href="#jestrunalltimers">#</a></h3><p>Exhausts the <strong>macro</strong>-task queue (i.e., all tasks queued by <code>setTimeout()</code>, <code>setInterval()</code>, and <code>setImmediate()</code>).</p><p>When this API is called, all pending &quot;macro-tasks&quot; that have been queued via <code>setTimeout()</code> or <code>setInterval()</code> will be executed. Additionally if those macro-tasks themselves schedule new macro-tasks, those will be continually exhausted until there are no more macro-tasks remaining in the queue.</p><p>This is often useful for synchronously executing setTimeouts during a test in order to synchronously assert about some behavior that would only happen after the <code>setTimeout()</code> or <code>setInterval()</code> callbacks executed. See the <a href="/jest/docs/timer-mocks.html" target="">Timer mocks</a> doc for more information.</p><h3><a class="anchor" name="jestrunallimmediates"></a><code>jest.runAllImmediates()</code> <a class="hash-link" href="#jestrunallimmediates">#</a></h3><p>Exhausts all tasks queued by <code>setImmediate()</code>.</p><h3><a class="anchor" name="jestruntimerstotimemstorun"></a><code>jest.runTimersToTime(msToRun)</code> <a class="hash-link" href="#jestruntimerstotimemstorun">#</a></h3><p>Executes only the macro task queue (i.e. all tasks queued by <code>setTimeout()</code> or <code>setInterval()</code> and <code>setImmediate()</code>).</p><p>When this API is called, all pending &quot;macro-tasks&quot; that have been queued via <code>setTimeout()</code> or <code>setInterval()</code>, and would be executed within <code>msToRun</code> milliseconds will be executed. Additionally if those macro-tasks schedule new macro-tasks that would be executed within the same time frame, those will be executed until there are no more macro-tasks remaining in the queue, that should be run within <code>msToRun</code> milliseconds.</p><h3><a class="anchor" name="jestrunonlypendingtimers"></a><code>jest.runOnlyPendingTimers()</code> <a class="hash-link" href="#jestrunonlypendingtimers">#</a></h3><p>Executes only the macro-tasks that are currently pending (i.e., only the tasks that have been queued by <code>setTimeout()</code> or <code>setInterval()</code> up to this point). If any of the currently pending macro-tasks schedule new macro-tasks, those new tasks will not be executed by this call.</p><p>This is useful for scenarios such as one where the module being tested schedules a <code>setTimeout()</code> whose callback schedules another <code>setTimeout()</code> recursively (meaning the scheduling never stops). In these scenarios, it&#x27;s useful to be able to run forward in time by a single step at a time.</p><h3><a class="anchor" name="jestsetmockmodulename-moduleexports"></a><code>jest.setMock(moduleName, moduleExports)</code> <a class="hash-link" href="#jestsetmockmodulename-moduleexports">#</a></h3><p>Explicitly supplies the mock object that the module system should return for the specified module.</p><p>On occasion there are times where the automatically generated mock the module system would normally provide you isn&#x27;t adequate enough for your testing needs. Normally under those circumstances you should write a <a href="/jest/docs/manual-mocks.html" target="">manual mock</a> that is more adequate for the module in question. However, on extremely rare occasions, even a manual mock isn&#x27;t suitable for your purposes and you need to build the mock yourself inside your test.</p><p>In these rare scenarios you can use this API to manually fill the slot in the module system&#x27;s mock-module registry.</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><p><em>Note It is recommended to use <a href="#jestmockmodulename-factory-options" target=""><code>jest.mock()</code></a> instead. The <code>jest.mock</code> API&#x27;s second argument is a module factory instead of the expected exported module object.</em></p><h3><a class="anchor" name="jestsettimeouttimeout"></a><code>jest.setTimeout(timeout)</code> <a class="hash-link" href="#jestsettimeouttimeout">#</a></h3><p>Set the default timeout interval for tests and before/after hooks in milliseconds.</p><p><em>Note: The default timeout interval is 5 seconds if this method is not called.</em></p><p>Пример:</p><pre class="prism language-js">jest<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span spellcheck="true" class="token comment">// 1 second</span></pre><h3><a class="anchor" name="jestusefaketimers"></a><code>jest.useFakeTimers()</code> <a class="hash-link" href="#jestusefaketimers">#</a></h3><p>Instructs Jest to use fake versions of the standard timer functions (<code>setTimeout</code>, <code>setInterval</code>, <code>clearTimeout</code>, <code>clearInterval</code>, <code>nextTick</code>, <code>setImmediate</code> and <code>clearImmediate</code>).</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><h3><a class="anchor" name="jestuserealtimers"></a><code>jest.useRealTimers()</code> <a class="hash-link" href="#jestuserealtimers">#</a></h3><p>Instructs Jest to use the real versions of the standard timer functions.</p><p>Возвращает объект <code>jest</code> для создания цепочки вызовов.</p><h3><a class="anchor" name="jestspyonobject-methodname"></a><code>jest.spyOn(object, methodName)</code> <a class="hash-link" href="#jestspyonobject-methodname">#</a></h3><h5><a class="anchor" name="jest-1900"></a>доступно в версиях Jest <strong>19.0.0+</strong> <a class="hash-link" href="#jest-1900">#</a></h5><p>Creates a mock function similar to <code>jest.fn</code> but also tracks calls to <code>object[methodName]</code>. Returns a Jest mock function.</p><p><em>Note: By default, <code>jest.spyOn</code> also calls the <strong>spied</strong> method. This is different behavior from most other test libraries. If you want to overwrite the original function, you can use <code>jest.spyOn(object, methodName).mockImplementation(() =&gt; customImplementation)</code> or <code>object[methodName] = jest.fn(() =&gt; customImplementation);</code></em></p><p>Пример:</p><pre class="prism language-js"><span class="token keyword">const</span> video <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> video<span class="token punctuation">;</span></pre><p>Пример теста:</p><pre class="prism language-js"><span class="token keyword">const</span> video <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&#x27;./video&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">&#x27;проигрывает видео&#x27;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> spy <span class="token operator">=</span> jest<span class="token punctuation">.</span><span class="token function">spyOn</span><span class="token punctuation">(</span>video<span class="token punctuation">,</span> <span class="token string">&#x27;play&#x27;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> isPlaying <span class="token operator">=</span> video<span class="token punctuation">.</span><span class="token function">play</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">expect</span><span class="token punctuation">(</span>spy<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHaveBeenCalled</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>isPlaying<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toBe</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  spy<span class="token punctuation">.</span><span class="token function">mockReset</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  spy<span class="token punctuation">.</span><span class="token function">mockRestore</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></pre></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="mock-function-api.html#content">← Предыдущая</a><a class="docs-next button" href="configuration.html#content">Next →</a></div></div></div></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/jest" class="nav-home"><img src="/jest/img/jest-outline.svg" alt="Jest" width="66" height="58"/></a><div><h5>Docs</h5><a href="/jest/docs/ru/getting-started.html">Getting Started</a><a href="/jest/docs/ru/snapshot-testing.html">Guides</a><a href="/jest/docs/ru/api.html">API Reference</a></div><div><h5>Community</h5><a href="/jest/ru/users.html">User Showcase</a><a href="http://stackoverflow.com/questions/tagged/jestjs" target="_blank">Stack Overflow</a><a href="https://discordapp.com/channels/102860784329052160/103622435865104384">Jest Chat</a><a href="https://twitter.com/fbjest" target="_blank">Twitter</a></div><div><h5>More</h5><a href="/jest/blog">Blog</a><a href="https://github.com/facebook/jest">GitHub</a><a class="github-button" href="https://github.com/facebook/jest" data-icon="octicon-star" data-count-href="/facebook/jest/stargazers" data-count-api="/repos/facebook/jest#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star facebook/jest on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" class="fbOpenSource"><img src="/jest/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2017 Facebook Inc.</section></footer></div><script type="text/javascript" src="//cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
              (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
              m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
              })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

              ga('create', 'UA-44373548-17', 'auto');
              ga('send', 'pageview');
            </script><script>
              var search = docsearch({
                apiKey: '833906d7486e4059359fa58823c4ef56',
                indexName: 'jest',
                inputSelector: '#search_input_react'
              });
            </script></body></html>